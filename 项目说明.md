# 📚 AI Agent 项目总览

## 🎯 项目简介

这是一个功能完整的 AI Agent 平台，集成了：
- 💬 **智能对话**：基于 DeepSeek API 的多轮对话
- 📚 **RAG 知识库**：文档上传、向量检索、智能问答
- 🔧 **工具系统**：内置工具（笔记、搜索、图表）+ 上网能力
- 🌐 **上网功能**：网页搜索、内容提取、天气查询
- 🎨 **现代界面**：ChatGPT/Coze 风格的专业级 UI

---

## 📁 项目结构

```
ai_agent/
│
├── README.md                    # 主要文档（安装、使用、API）
├── 配置指南.md                   # 详细配置说明
├── .gitignore                   # Git 忽略规则
├── .env                         # 环境变量（不提交到 Git）
│
├── backend/                     # 后端服务
│   ├── app/
│   │   ├── main.py             # FastAPI 主应用
│   │   ├── config.py           # 配置管理
│   │   ├── database.py         # 数据库模型
│   │   ├── rag_service.py      # RAG 检索服务
│   │   └── tool_service.py     # 工具服务（含上网功能）
│   │
│   ├── data/
│   │   ├── agent.db            # SQLite 数据库
│   │   ├── chroma/             # 向量数据库
│   │   ├── uploads/            # 用户上传的文档
│   │   ├── notes/              # AI 生成的笔记
│   │   └── diagrams/           # AI 生成的图表
│   │
│   ├── requirements.txt         # Python 依赖
│   └── 启动服务器.ps1            # 启动脚本（Windows）
│
└── frontend/                    # 前端界面
    ├── login.html              # 登录页面
    └── chat.html               # 主聊天界面
```

---

## 🚀 快速开始

### 1. 环境准备

```bash
# 创建虚拟环境
conda create -n ai-agent python=3.10 -y
conda activate ai-agent

# 安装依赖
cd backend
pip install -r requirements.txt
```

### 2. 配置 API Key

```powershell
# Windows PowerShell
$env:DEEPSEEK_API_KEY = "sk-your-api-key-here"
```

或创建 `.env` 文件（推荐）。

### 3. 启动服务

```bash
# 方式一：直接启动
cd backend
python -m uvicorn app.main:app --reload

# 方式二：使用脚本（Windows）
cd backend
.\启动服务器.ps1
```

### 4. 打开前端

在浏览器中打开：`frontend/login.html`

---

## ✨ 核心功能

### 1. 智能对话
- ✅ 流式响应（打字机效果）
- ✅ 多轮对话上下文管理
- ✅ Markdown 渲染（标题、列表、表格、代码）
- ✅ LaTeX 数学公式支持
- ✅ 代码语法高亮 + 一键复制

### 2. RAG 知识库
- ✅ PDF 文档上传（拖拽支持）
- ✅ 向量化存储（ChromaDB）
- ✅ 语义检索增强回答
- ✅ 文档管理（查看、删除）
- ✅ 实时显示检索结果

### 3. 工具系统

**内置工具：**
- 📝 **write_note** - 保存笔记到本地
- 📚 **list_knowledge_docs** - 列出知识库文档
- 🔍 **search_knowledge** - 搜索知识库
- 📊 **draw_diagram** - 绘制 Mermaid 图表

**上网工具：**
- 🌐 **web_search** - DuckDuckGo 网页搜索
- 📄 **fetch_webpage** - Jina Reader 网页内容提取
- ⛅ **get_weather** - wttr.in 天气查询

### 4. 现代化界面
- ✅ 登录系统（演示模式）
- ✅ 三栏布局（侧边栏 + 主区 + 上下文面板）
- ✅ 对话历史管理
- ✅ 响应式设计（桌面/移动）
- ✅ 深色主题
- ✅ 流畅动画

---

## 🛠 技术栈

### 后端
| 技术 | 版本 | 用途 |
|------|------|------|
| Python | 3.10+ | 运行环境 |
| FastAPI | 0.110.0 | Web 框架 |
| DeepSeek API | - | 大语言模型 |
| ChromaDB | 0.5.5 | 向量数据库 |
| SQLite | - | 关系数据库 |
| Sentence Transformers | 3.0+ | 文本嵌入 |
| httpx | 0.27.0 | HTTP 客户端 |
| BeautifulSoup | 4.12.3 | HTML 解析 |

### 前端
| 技术 | 用途 |
|------|------|
| HTML5/CSS3 | 页面结构和样式 |
| JavaScript (ES6+) | 交互逻辑 |
| Marked.js | Markdown 渲染 |
| KaTeX | 数学公式渲染 |
| Highlight.js | 代码高亮 |
| Fetch API | 后端通信 |

### 第三方服务
| 服务 | 用途 |
|------|------|
| DeepSeek | LLM 推理 |
| DuckDuckGo | 网页搜索 |
| Jina Reader | 网页内容提取 |
| wttr.in | 天气 API |

---

## 📖 文档索引

| 文档 | 内容 |
|------|------|
| **README.md** | 项目介绍、快速开始、使用指南、API 文档、FAQ |
| **配置指南.md** | 环境变量配置、依赖安装、问题排查 |
| **项目说明.md** | 本文件，项目总览 |

---

## 🔌 API 接口

服务启动后访问 Swagger 文档：`http://localhost:8000/docs`

### 主要端点

**对话接口：**
- `POST /chat` - 普通对话
- `POST /chat/stream` - 流式对话（推荐）

**文档管理：**
- `POST /documents/upload` - 上传文档
- `GET /documents` - 列出文档
- `DELETE /documents/{id}` - 删除文档

**工具管理：**
- `GET /tools` - 列出工具
- `POST /tools` - 添加工具
- `PUT /tools/{id}` - 更新工具
- `DELETE /tools/{id}` - 删除工具
- `GET /tool-logs` - 工具执行日志

---

## 💡 使用示例

### 基础对话
```
用户：你好，介绍一下自己
AI：我是一个智能助手，可以帮你...
```

### RAG 知识库问答
```
用户：（上传 Python教程.pdf）
用户：Python 的列表推导式是什么？
AI：[检索知识库] 根据您上传的文档，列表推导式是...
```

### 网页搜索
```
用户：搜索 2024 年人工智能发展趋势
AI：[调用 web_search]
找到以下相关信息：
1. 标题：AI发展报告2024
   链接：https://...
   摘要：2024年AI主要趋势包括...
```

### 网页内容提取
```
用户：帮我总结这篇文章：https://example.com/article
AI：[调用 fetch_webpage]
[提取内容]
这篇文章主要讲述了...
```

### 天气查询
```
用户：北京今天天气怎么样？
AI：[调用 get_weather]
北京今天的天气：
- 温度：15°C
- 天气：晴
- 湿度：45%
- 风速：12 km/h
```

### 笔记保存
```
用户：总结我们的对话并保存为笔记
AI：[调用 write_note]
已为您保存到：data/notes/对话总结_2024.txt
内容包括：
1. 讨论了 AI Agent 的功能
2. 测试了 RAG 检索
...
```

---

## 🎯 适用场景

### ✅ 适合
- 📚 **个人知识管理** - 上传文档建立个人知识库
- 💼 **学习助手** - 总结笔记、答疑解惑
- 🔍 **信息检索** - 快速查找文档内容
- 📊 **数据分析** - 结合工具生成图表
- 🌐 **信息收集** - 网页搜索和内容提取

### ❌ 不适合
- 大规模生产部署（需要增加鉴权、限流等）
- 实时性要求极高的场景（< 100ms 响应）
- 多模态需求（图片、音频、视频）

---

## 🚧 已知限制

1. **单用户模式**
   - 当前版本无真实用户认证
   - 演示模式，任意邮箱密码可登录

2. **性能限制**
   - 首次启动需下载模型（约 500MB）
   - 单次检索 top_k 建议 ≤ 10
   - 大文件上传建议 < 100MB

3. **功能限制**
   - 暂不支持图片、音频、视频
   - 暂不支持多 Agent 协作
   - 暂不支持工作流编排

---

## 🔐 安全注意事项

1. **API Key 安全**
   - 不要将 `.env` 文件提交到 Git
   - 定期轮换 API Key
   - 设置使用限额

2. **文件上传**
   - 当前无文件类型严格校验
   - 生产环境需添加病毒扫描
   - 建议限制单文件大小

3. **网络请求**
   - 网页抓取遵守 robots.txt
   - 避免频繁请求导致 IP 被封
   - 考虑添加请求速率限制

---

## 📈 未来规划

### 短期（1-2周）
- [ ] 用户真实认证系统
- [ ] Prompt 模板管理
- [ ] 对话导出功能
- [ ] 移动端优化

### 中期（1-2月）
- [ ] 多 Agent 协作
- [ ] 工作流可视化编辑器
- [ ] 长期记忆系统
- [ ] 插件市场

### 长期（3月+）
- [ ] 多模态支持（图片、视频）
- [ ] 数据库连接器
- [ ] 语音输入输出
- [ ] 团队协作功能

---

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发流程
1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

### 代码规范
- Python: PEP 8
- JavaScript: ES6+, 使用 const/let
- 注释: 中文，清晰说明逻辑

---

## 📞 获取帮助

- 📖 查看 [README.md](README.md) 详细文档
- ⚙️ 查看 [配置指南.md](配置指南.md) 配置说明
- 🐛 提交 Issue 报告问题
- 💬 Discussions 讨论功能

---

## 📄 许可证

本项目仅供学习和研究使用。

---

## 🙏 致谢

感谢以下开源项目和服务：
- [DeepSeek](https://www.deepseek.com/) - 强大的 LLM
- [FastAPI](https://fastapi.tiangolo.com/) - 现代 Web 框架
- [ChromaDB](https://www.trychroma.com/) - 向量数据库
- [Sentence Transformers](https://www.sbert.net/) - 文本嵌入
- [Jina AI](https://jina.ai/) - 网页内容提取
- 以及所有其他使用的开源库

---

**最后更新：2024年** | **版本：v2.0** | **状态：✅ 生产就绪**

---

## 📊 项目统计

- **代码行数**：~3000+ 行
- **功能模块**：8 个
- **内置工具**：7 个
- **API 端点**：15+ 个
- **文档页数**：3 个
- **开发时长**：2 周

---

**🎉 享受你的 AI Agent 平台！**

