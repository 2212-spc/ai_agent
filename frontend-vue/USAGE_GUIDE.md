# AI Agent Studio - 使用指南

## 🚀 快速开始

### 1. 注册账户
```
1. 访问: http://localhost:5173/register
2. 填写信息:
   - 用户名: 你的用户名
   - 邮箱: your@email.com
   - 密码: 至少6个字符
   - 确认密码: 再次输入
3. 点击"注册"
4. 看到"注册成功"提示
5. 3秒后自动跳转到登录页面
```

### 2. 登录
```
1. 访问: http://localhost:5173/login
2. 输入注册时的用户名和密码
3. 点击"登录"
4. 登录成功后跳转到聊天页面

或者：点击"跳过登录"直接使用（无需注册）
```

### 3. 开始对话
```
1. 进入聊天界面
2. 输入消息
3. 按Enter发送
4. 等待AI回复
```

---

## 🎯 核心功能

### 单智能体模式 vs 多智能体模式

#### **单智能体模式**（默认）
- 直接调用DeepSeek LLM
- 快速响应
- 适合简单对话
- **不支持工具调用**

#### **多智能体模式**（推荐）
- 使用LangGraph Agent
- 支持工具调用
- 可以画图、写文件、搜索等
- 更智能的任务规划

**切换方式：**
点击顶部的模式开关，从"单智能体"切换到"多智能体"

---

## 🛠️ 工具功能（仅多智能体模式）

### 1. 画图功能 🎨

**示例对话：**
```
你: 帮我画一个正弦函数的图
AI: [调用plot工具生成图表]
   → 显示图片
```

**支持的图表类型：**
- 折线图、柱状图、散点图
- 饼图、直方图
- 多子图
- 3D图表

**示例：**
```
画一个柱状图，横轴是月份1-12，纵轴是销售额
画一个散点图显示身高和体重的关系
画一个饼图显示各部门人数占比
```

### 2. 文件操作 📄

**读取文件：**
```
你: 读取data.txt文件的内容
AI: [调用文件读取工具]
   → 显示文件内容
```

**写入文件：**
```
你: 把这段文字保存到output.txt
AI: [调用文件写入工具]
   → 文件已保存
```

### 3. 代码执行 🐍

**Python代码：**
```
你: 用Python计算1到100的和
AI: [执行Python代码]
   → 结果: 5050
```

### 4. 网络搜索 🔍

```
你: 搜索最新的AI新闻
AI: [调用搜索工具]
   → 显示搜索结果
```

---

## 📚 历史记录功能

### 查看历史
```
1. 左侧边栏显示最近10条对话
2. 每条显示标题和日期
3. 点击任一历史记录
4. 消息加载到主界面
5. 可以继续该对话
```

### 自动保存
```
- 每次对话自动保存
- 30秒自动刷新历史列表
- 后端持久化存储
- 不会丢失聊天记录
```

### 新建对话
```
点击"➕ 新建对话"按钮
→ 清空当前消息
→ 开始新的会话
```

---

## 🤖 Agent构建器

### 创建自定义Agent
```
1. 点击🛠️按钮打开构建器
2. 从节点库拖拽节点:
   - 路由节点 🔀
   - 执行节点 ⚙️
   - 工具节点 🔧
   - LLM节点 🤖
   - 知识库 📚
3. 双击节点开始连线
4. 点击目标节点完成连线
5. 点击节点⚙️配置属性
6. 点击"保存"保存配置
7. 点击"▶️ 执行"测试Agent
```

### 调整面板大小
```
- 鼠标移到左边缘
- 看到↔光标
- 拖动调整宽度（300-800px）
```

### 画布操作
```
- 拖拽节点：鼠标左键
- 平移画布：拖拽背景
- 缩放画布：鼠标滚轮
- 连接节点：双击→点击
```

---

## 📝 Prompt管理

### 查看Prompt模板
```
1. 点击"📝 Prompt模板"
2. 查看所有模板列表
3. 点击"查看"查看详情
4. 点击"激活"设为当前使用
```

### 创建新Prompt
```
1. 点击"➕ 新建Prompt"
2. 填写信息:
   - 名称: Prompt名称
   - 智能体: 选择关联的Agent
   - 描述: 简要说明
   - 内容: Prompt文本
3. 点击"创建"
4. 新Prompt出现在列表
```

---

## 📁 知识库管理

### 上传文档
```
1. 点击"📁 知识库"
2. 点击"📤 上传文档"
3. 选择文件（PDF/TXT/DOCX）
4. 等待上传完成
5. 文档出现在列表
```

### 使用知识库
```
1. 在对话界面
2. 点击➕展开选项
3. 勾选"知识库"
4. 发送消息
5. AI会检索知识库回答
```

### 删除文档
```
1. 在知识库列表
2. 找到要删除的文档
3. 点击🗑️按钮
4. 确认删除
```

---

## 🧠 记忆管理

### 创建记忆
```
1. 点击"🧠 记忆管理"
2. 点击"➕ 新建记忆"
3. 填写:
   - 内容: 要记住的信息
   - 重要性: 高/中/低
   - 标签: 用逗号分隔
4. 点击"创建"
```

### 记忆用途
```
- AI长期记忆重要信息
- 跨会话保持上下文
- 个性化回复
```

---

## 🎨 主题切换

### 切换亮色/暗色模式
```
点击顶部☀️/🌙按钮
→ 立即切换主题
→ 自动保存偏好
```

---

## 📊 Timeline过程展示

### 查看执行步骤
```
1. 点击"展开过程 →"
2. 右侧显示Timeline
3. 看到详细执行步骤:
   - 📝 接收消息
   - 📚 检索知识库
   - 🤖 AI推理
   - ✅ 返回结果
4. 可以拖拽左边缘调整宽度
```

---

## ⚙️ 高级设置

### 调整面板大小
```
Builder面板: 300-800px
Timeline面板: 250-600px
侧边栏: 280px（固定）

拖拽方式: 移动到左边缘→拖动
```

### 快捷键
```
Enter: 发送消息
Shift+Enter: 换行
Ctrl+K: 清空对话
Ctrl+N: 新建对话
```

---

## 🔧 故障排除

### 问题1: 历史记录不显示
**解决方案：**
```
1. 确保发送了至少一条消息
2. 等待30秒自动刷新
3. 手动点击🔄刷新按钮
4. 检查后端是否运行
```

### 问题2: 工具不工作
**解决方案：**
```
1. 确保切换到"多智能体"模式
2. 检查后端tools是否启用
3. 查看控制台是否有错误
```

### 问题3: 登录失败
**解决方案：**
```
1. 检查用户名密码是否正确
2. 确保后端API运行正常
3. 查看Network请求状态码
4. 可以选择"跳过登录"直接使用
```

### 问题4: 文件上传失败
**解决方案：**
```
1. 检查文件大小（建议<10MB）
2. 确认文件格式（PDF/TXT/DOCX）
3. 查看后端日志
4. 检查网络连接
```

---

## 📖 API参考

### 对话API
```javascript
// 单智能体
POST /chat
{
  "messages": [...],
  "model": "deepseek-chat",
  "session_id": "session-xxx"
}

// 多智能体（支持工具）
POST /chat/agent
{
  "messages": [...],
  "use_knowledge_base": true,
  "use_tools": true,
  "session_id": "session-xxx"
}
```

### 历史记录API
```javascript
// 获取会话列表
GET /conversations

// 获取会话消息
GET /conversation/{session_id}/history

// 删除会话
DELETE /conversation/{session_id}
```

### 认证API
```javascript
// 注册
POST /api/auth/register
{
  "username": "user",
  "email": "user@email.com",
  "password": "password"
}

// 登录
POST /api/auth/login
{
  "username": "user",
  "password": "password"
}
```

---

## 🎯 最佳实践

### 1. 使用多智能体模式
```
需要工具功能时，务必开启多智能体模式
```

### 2. 合理使用知识库
```
上传相关文档，AI回答更准确
```

### 3. 保存重要对话
```
历史记录自动保存，可随时回顾
```

### 4. 创建Prompt模板
```
常用提示词保存为模板，提高效率
```

### 5. 利用记忆功能
```
让AI记住重要信息，获得个性化体验
```

---

## 📞 获取帮助

### 查看日志
```
浏览器控制台: F12 → Console
后端日志: 终端输出
```

### 报告问题
```
1. 描述问题现象
2. 提供复现步骤
3. 附上错误截图
4. 包含控制台日志
```

---

## 🎉 开始使用

1. **注册/登录** → http://localhost:5173/register
2. **开启多智能体模式** → 切换开关
3. **试试画图** → "画一个正弦函数"
4. **查看历史** → 左侧栏点击记录
5. **构建Agent** → 点击🛠️按钮

**祝您使用愉快！** 🚀
